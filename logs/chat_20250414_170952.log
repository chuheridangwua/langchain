2025-04-14 17:09:52,977 [INFO] src.utils.callbacks: 日志系统初始化完成
2025-04-14 17:09:52,977 [INFO] src.utils.callbacks: 日志文件路径: logs\chat_20250414_170952.log
2025-04-14 17:09:52,977 [INFO] src.utils.callbacks: Windows系统UTF-8编码设置完成
2025-04-14 17:09:52,980 [DEBUG] httpx: load_ssl_context verify=True cert=None trust_env=True http2=False
2025-04-14 17:09:52,981 [DEBUG] httpx: load_verify_locations cafile='y:\\langchain\\.conda\\Library\\ssl\\cacert.pem'
2025-04-14 17:09:53,202 [DEBUG] httpx: load_ssl_context verify=True cert=None trust_env=True http2=False
2025-04-14 17:09:53,203 [DEBUG] httpx: load_verify_locations cafile='y:\\langchain\\.conda\\Library\\ssl\\cacert.pem'
2025-04-14 17:10:01,945 [INFO] root: 已加载会话 session_20250414170025
2025-04-14 17:10:01,952 [INFO] src.utils.callbacks: 初始化StreamingAgentCallbackHandler
2025-04-14 17:10:16,683 [DEBUG] src.chat: 聊天历史记录 (10 条消息):
2025-04-14 17:10:16,684 [DEBUG] src.chat: [0] human: 我叫啥...
2025-04-14 17:10:16,684 [DEBUG] src.chat: [1] ai: 我无法知道您的名字，因为我没有存储或记忆个人信息的功能。如果您愿意，可以告诉我您的名字，我会在本次对...
2025-04-14 17:10:16,685 [DEBUG] src.chat: [2] human: 陈乐翔...
2025-04-14 17:10:16,685 [DEBUG] src.chat: [3] ai: 目前没有找到关于“陈乐翔”的相关信息。如果您能提供更多背景或具体问题，我可以尝试进一步帮助您。...
2025-04-14 17:10:16,685 [DEBUG] src.chat: [4] human: histroy...
2025-04-14 17:10:16,685 [DEBUG] src.chat: [5] ai: Did you mean "history" as in general world history...
2025-04-14 17:10:16,685 [DEBUG] src.chat: [6] human: 我是谁...
2025-04-14 17:10:16,685 [DEBUG] src.chat: [7] human: 我是谁...
2025-04-14 17:10:16,685 [DEBUG] src.chat: [8] ai: “我是谁”是一个深刻的哲学问题，涉及自我认知、存在意义和生命价值。从哲学角度看，它引导我们思考自己的...
2025-04-14 17:10:16,688 [DEBUG] src.chat: [9] human: 我是谁...
2025-04-14 17:10:16,694 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): api.smith.langchain.com:443
2025-04-14 17:10:17,032 [ERROR] src.chat: 对话处理出错
Traceback (most recent call last):
  File "y:\langchain\langchain-app\src\chat.py", line 194, in interactive_conversation
    result = agent_executor.invoke(agent_input, config={"callbacks": callbacks})
  File "y:\langchain\.conda\lib\site-packages\langchain\chains\base.py", line 170, in invoke
    raise e
  File "y:\langchain\.conda\lib\site-packages\langchain\chains\base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "y:\langchain\.conda\lib\site-packages\langchain\agents\agent.py", line 1624, in _call
    next_step_output = self._take_next_step(
  File "y:\langchain\.conda\lib\site-packages\langchain\agents\agent.py", line 1330, in _take_next_step
    [
  File "y:\langchain\.conda\lib\site-packages\langchain\agents\agent.py", line 1330, in <listcomp>
    [
  File "y:\langchain\.conda\lib\site-packages\langchain\agents\agent.py", line 1358, in _iter_next_step
    output = self._action_agent.plan(
  File "y:\langchain\.conda\lib\site-packages\langchain\agents\agent.py", line 804, in plan
    full_output = self.llm_chain.predict(callbacks=callbacks, **full_inputs)
  File "y:\langchain\.conda\lib\site-packages\langchain\chains\llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "y:\langchain\.conda\lib\site-packages\langchain_core\_api\deprecation.py", line 188, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "y:\langchain\.conda\lib\site-packages\langchain\chains\base.py", line 389, in __call__
    return self.invoke(
  File "y:\langchain\.conda\lib\site-packages\langchain\chains\base.py", line 170, in invoke
    raise e
  File "y:\langchain\.conda\lib\site-packages\langchain\chains\base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "y:\langchain\.conda\lib\site-packages\langchain\chains\llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "y:\langchain\.conda\lib\site-packages\langchain\chains\llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "y:\langchain\.conda\lib\site-packages\langchain\chains\llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "y:\langchain\.conda\lib\site-packages\langchain_core\prompts\chat.py", line 762, in format_prompt
    messages = self.format_messages(**kwargs)
  File "y:\langchain\.conda\lib\site-packages\langchain_core\prompts\chat.py", line 1219, in format_messages
    message = message_template.format_messages(**kwargs)
  File "y:\langchain\.conda\lib\site-packages\langchain_core\prompts\chat.py", line 258, in format_messages
    raise ValueError(msg)  # noqa: TRY004
ValueError: variable agent_scratchpad should be a list of base messages, got  of type <class 'str'>
2025-04-14 17:10:17,183 [DEBUG] urllib3.connectionpool: https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 672
2025-04-14 17:10:17,247 [DEBUG] langsmith.client: Sending multipart request with context: trace=b8c51d6d-aa9e-403c-a731-b44d3348afb7,id=b8c51d6d-aa9e-403c-a731-b44d3348afb7; trace=b8c51d6d-aa9e-403c-a731-b44d3348afb7,id=821c714c-2204-4b26-9f2f-319e3db8b79d
2025-04-14 17:10:17,250 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): api.smith.langchain.com:443
2025-04-14 17:10:17,797 [DEBUG] urllib3.connectionpool: https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34
2025-04-14 17:10:23,917 [INFO] root: 已保存会话 session_20250414170025
2025-04-14 17:10:23,952 [DEBUG] langsmith.client: Compressed traces control thread is shutting down
2025-04-14 17:10:24,075 [DEBUG] langsmith.client: Closing Client.session
2025-04-14 17:10:24,076 [DEBUG] langsmith.client: Closing Client.session
