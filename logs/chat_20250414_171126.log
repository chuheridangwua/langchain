2025-04-14 17:11:26,353 [INFO] src.utils.callbacks: 日志系统初始化完成
2025-04-14 17:11:26,353 [INFO] src.utils.callbacks: 日志文件路径: logs\chat_20250414_171126.log
2025-04-14 17:11:26,353 [INFO] src.utils.callbacks: Windows系统UTF-8编码设置完成
2025-04-14 17:11:26,357 [DEBUG] httpx: load_ssl_context verify=True cert=None trust_env=True http2=False
2025-04-14 17:11:26,358 [DEBUG] httpx: load_verify_locations cafile='y:\\langchain\\.conda\\Library\\ssl\\cacert.pem'
2025-04-14 17:11:26,574 [DEBUG] httpx: load_ssl_context verify=True cert=None trust_env=True http2=False
2025-04-14 17:11:26,575 [DEBUG] httpx: load_verify_locations cafile='y:\\langchain\\.conda\\Library\\ssl\\cacert.pem'
2025-04-14 17:11:29,417 [INFO] root: 已加载会话 session_20250414170025
2025-04-14 17:11:29,419 [INFO] src.utils.callbacks: 初始化StreamingAgentCallbackHandler
2025-04-14 17:11:31,928 [DEBUG] src.chat: 聊天历史记录 (10 条消息):
2025-04-14 17:11:31,928 [DEBUG] src.chat: [0] ai: 我无法知道您的名字，因为我没有存储或记忆个人信息的功能。如果您愿意，可以告诉我您的名字，我会在本次对...
2025-04-14 17:11:31,929 [DEBUG] src.chat: [1] human: 陈乐翔...
2025-04-14 17:11:31,929 [DEBUG] src.chat: [2] ai: 目前没有找到关于“陈乐翔”的相关信息。如果您能提供更多背景或具体问题，我可以尝试进一步帮助您。...
2025-04-14 17:11:31,929 [DEBUG] src.chat: [3] human: histroy...
2025-04-14 17:11:31,929 [DEBUG] src.chat: [4] ai: Did you mean "history" as in general world history...
2025-04-14 17:11:31,930 [DEBUG] src.chat: [5] human: 我是谁...
2025-04-14 17:11:31,930 [DEBUG] src.chat: [6] human: 我是谁...
2025-04-14 17:11:31,930 [DEBUG] src.chat: [7] ai: “我是谁”是一个深刻的哲学问题，涉及自我认知、存在意义和生命价值。从哲学角度看，它引导我们思考自己的...
2025-04-14 17:11:31,930 [DEBUG] src.chat: [8] human: 我是谁...
2025-04-14 17:11:31,930 [DEBUG] src.chat: [9] human: 我是谁...
2025-04-14 17:11:31,937 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): api.smith.langchain.com:443
2025-04-14 17:11:32,151 [DEBUG] openai._base_client: Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'content': '你是一个智能助手，可以调用以下工具：\n\nget_current_time: 获取当前系统时间和日期\nsearch_tool: 使用Tavily进行网络搜索，返回最相关的3条搜索结果，每条结果包含标题、URL和摘要信息。\ngenerate_and_execute_code: 根据自然语言指令生成并执行Python代码\nexecute_python_code: 执行指定的Python代码并返回结果\n\n\n下面是你与用户的对话历史，请记住这些信息，保持连贯性：\n\n[AIMessage(content=\'我无法知道您的名字，因为我没有存储或记忆个人信息的功能。如果您愿意，可以告诉我您的名字，我会在本次对话中称呼您。\', additional_kwargs={}, response_metadata={}), HumanMessage(content=\'陈乐翔\', additional_kwargs={}, response_metadata={}), AIMessage(content=\'目前没有找到关于“陈乐翔”的相关信息。如果您能提供更多背景或具体问题，我可以尝试进一步帮助您。\', additional_kwargs={}, response_metadata={}), HumanMessage(content=\'histroy\', additional_kwargs={}, response_metadata={}), AIMessage(content=\'Did you mean "history" as in general world history, or were you referring to something specific like "Snowflake Query History"? Please clarify so I can assist better!\', additional_kwargs={}, response_metadata={}), HumanMessage(content=\'我是谁\', additional_kwargs={}, response_metadata={}), HumanMessage(content=\'我是谁\', additional_kwargs={}, response_metadata={}), AIMessage(content=\'“我是谁”是一个深刻的哲学问题，涉及自我认知、存在意义和生命价值。从哲学角度看，它引导我们思考自己的本质、与他人的关系以及存在的目的。心理学上，它可能与自我意识、自尊和自我认同相关。你可以通过以下方式探索这个问题：\\n1. 反思自己的价值观、兴趣和人生目标；\\n2. 思考你与他人和社会的关系；\\n3. 阅读哲学或心理学相关书籍（如搜索结果提到的资源）；\\n4. 通过冥想或写作等方式进行自我对话。\\n这个问题没有标准答案，每个人的探索过程都是独特的。\', additional_kwargs={}, response_metadata={}), HumanMessage(content=\'我是谁\', additional_kwargs={}, response_metadata={}), HumanMessage(content=\'我是谁\', additional_kwargs={}, response_metadata={})]\n\n\n\n> get_current_time: 获取当前系统时间和日期\n> search_tool: 使用Tavily进行网络搜索，返回最相关的3条搜索结果，每条结果包含标题、URL和摘要信息。\n> generate_and_execute_code: 根据自然语言指令生成并执行Python代码\n> execute_python_code: 执行指定的Python代码并返回结果\n\nTo use a tool, please use the following format:\n\n```\nThought: Do I need to use a tool? Yes\nAction: the action to take, should be one of [get_current_time, search_tool, generate_and_execute_code, execute_python_code]\nAction Input: the input to the action\nObservation: the result of the action\n```\n\nWhen you have a response to say to the Human, or if you do not need to use a tool, you MUST use the format:\n\n```\nThought: Do I need to use a tool? No\nAI: [your response here]\n```\n\nQuestion: 我是谁\n', 'role': 'user'}], 'model': 'deepseek-v3-250324', 'stop': ['\nObservation:', '\n\tObservation:'], 'stream': True, 'temperature': 0.7}}
2025-04-14 17:11:32,153 [DEBUG] openai._base_client: Sending HTTP Request: POST https://ark.cn-beijing.volces.com/api/v3/chat/completions
2025-04-14 17:11:32,153 [DEBUG] httpcore.connection: connect_tcp.started host='ark.cn-beijing.volces.com' port=443 local_address=None timeout=None socket_options=None
2025-04-14 17:11:32,211 [DEBUG] httpcore.connection: connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000173AB3927A0>
2025-04-14 17:11:32,212 [DEBUG] httpcore.connection: start_tls.started ssl_context=<ssl.SSLContext object at 0x00000173934CFAC0> server_hostname='ark.cn-beijing.volces.com' timeout=None
2025-04-14 17:11:32,252 [DEBUG] httpcore.connection: start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x00000173AB392500>
2025-04-14 17:11:32,252 [DEBUG] httpcore.http11: send_request_headers.started request=<Request [b'POST']>
2025-04-14 17:11:32,253 [DEBUG] httpcore.http11: send_request_headers.complete
2025-04-14 17:11:32,253 [DEBUG] httpcore.http11: send_request_body.started request=<Request [b'POST']>
2025-04-14 17:11:32,254 [DEBUG] httpcore.http11: send_request_body.complete
2025-04-14 17:11:32,254 [DEBUG] httpcore.http11: receive_response_headers.started request=<Request [b'POST']>
2025-04-14 17:11:32,469 [DEBUG] urllib3.connectionpool: https://api.smith.langchain.com:443 "GET /info HTTP/1.1" 200 672
2025-04-14 17:11:32,531 [DEBUG] langsmith.client: Sending multipart request with context: trace=2d68382e-dbad-4815-95f1-0a19a3ee0134,id=2d68382e-dbad-4815-95f1-0a19a3ee0134; trace=2d68382e-dbad-4815-95f1-0a19a3ee0134,id=3e0930d3-9354-4a82-b1eb-edc593719fe3; trace=2d68382e-dbad-4815-95f1-0a19a3ee0134,id=03d56c31-f084-4b3d-a0ca-28a8a168812d
2025-04-14 17:11:32,578 [DEBUG] httpcore.http11: receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'server', b'istio-envoy'), (b'date', b'Mon, 14 Apr 2025 09:11:31 GMT'), (b'content-type', b'text/event-stream'), (b'x-client-request-id', b'unknown-20250414171131-YnxMChLK'), (b'cache-control', b'no-cache'), (b'x-envoy-upstream-service-time', b'304'), (b'x-request-id', b'02174462189182018a5d045ccc6bc157c3dd771c8dafe42d4b295'), (b'transfer-encoding', b'chunked')])
2025-04-14 17:11:32,580 [INFO] httpx: HTTP Request: POST https://ark.cn-beijing.volces.com/api/v3/chat/completions "HTTP/1.1 200 OK"
2025-04-14 17:11:32,580 [DEBUG] openai._base_client: HTTP Response: POST https://ark.cn-beijing.volces.com/api/v3/chat/completions "200 OK" Headers({'server': 'istio-envoy', 'date': 'Mon, 14 Apr 2025 09:11:31 GMT', 'content-type': 'text/event-stream', 'x-client-request-id': 'unknown-20250414171131-YnxMChLK', 'cache-control': 'no-cache', 'x-envoy-upstream-service-time': '304', 'x-request-id': '02174462189182018a5d045ccc6bc157c3dd771c8dafe42d4b295', 'transfer-encoding': 'chunked'})
2025-04-14 17:11:32,581 [DEBUG] openai._base_client: request_id: 02174462189182018a5d045ccc6bc157c3dd771c8dafe42d4b295
2025-04-14 17:11:32,581 [DEBUG] httpcore.http11: receive_response_body.started request=<Request [b'POST']>
2025-04-14 17:11:32,782 [DEBUG] urllib3.connectionpool: https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34
2025-04-14 17:11:37,832 [DEBUG] httpcore.http11: receive_response_body.complete
2025-04-14 17:11:37,832 [DEBUG] httpcore.http11: response_closed.started
2025-04-14 17:11:37,832 [DEBUG] httpcore.http11: response_closed.complete
2025-04-14 17:11:37,841 [INFO] root: 已保存会话 session_20250414170025
2025-04-14 17:11:38,337 [DEBUG] langsmith.client: Sending compressed multipart request with context: trace=2d68382e-dbad-4815-95f1-0a19a3ee0134,id=03d56c31-f084-4b3d-a0ca-28a8a168812d; trace=2d68382e-dbad-4815-95f1-0a19a3ee0134,id=3e0930d3-9354-4a82-b1eb-edc593719fe3; trace=2d68382e-dbad-4815-95f1-0a19a3ee0134,id=2d68382e-dbad-4815-95f1-0a19a3ee0134
2025-04-14 17:11:38,576 [DEBUG] urllib3.connectionpool: https://api.smith.langchain.com:443 "POST /runs/multipart HTTP/1.1" 202 34
2025-04-14 17:11:49,072 [INFO] root: 已保存会话 session_20250414170025
2025-04-14 17:11:49,128 [DEBUG] langsmith.client: Compressed traces control thread is shutting down
2025-04-14 17:11:49,267 [DEBUG] langsmith.client: Closing Client.session
2025-04-14 17:11:49,268 [DEBUG] langsmith.client: Closing Client.session
2025-04-14 17:11:49,440 [DEBUG] httpcore.connection: close.started
2025-04-14 17:11:49,442 [DEBUG] httpcore.connection: close.complete
